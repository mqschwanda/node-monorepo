#!/usr/bin/env node
"use strict";function _interopDefault(r){return r&&"object"==typeof r&&"default"in r?r.default:r}var crossSpawn=_interopDefault(require("cross-spawn"));require("path"),process.on("unhandledRejection",function(r){throw r});var crossSpawn_1=crossSpawn,toConsumableArray=function(r){if(Array.isArray(r)){for(var e=0,s=Array(r.length);e<r.length;e++)s[e]=r[e];return s}return Array.from(r)},scripts=["test","build"],buildError=function(r){return"The build failed because the process exited too early."+(r&&" "+r)},messages={SIGKILL:buildError("This probably means the system ran out of memory or someone called `kill -9` on the process."),SIGTERM:buildError("Someone might have called `kill` or `killall`, or the system could be shutting down.")},getScriptArgs=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:r,s=process.argv.slice(2),t=0<i?s.slice(0,i):[],o=s.slice(i+1),i=s.findIndex(function(r){return e.includes(r)}),n=-1===i?s[0]:s[i],c=r(n);return{script:n,args:[].concat(toConsumableArray(t),[c],toConsumableArray(o))}},_getScriptArgs=getScriptArgs(scripts,_getScriptPath),script=_getScriptArgs.script,args=_getScriptArgs.args,runScript=function(){var r=crossSpawn_1.sync("node",args,{stdio:"inherit"}),e=r.signal,s=r.status;e&&("SIGKILL"===e?console.error(messages.SIGKILL):"SIGTERM"===e&&console.error(messages.SIGTERM),process.exit(1)),process.exit(s)};scripts.includes(script)?runScript(script):console.error(messages.scriptError(script));
