"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var babel=_interopDefault(require("rollup-plugin-babel")),executable=_interopDefault(require("rollup-plugin-executable")),nodeResolve=_interopDefault(require("rollup-plugin-node-resolve")),commonjs=_interopDefault(require("rollup-plugin-commonjs")),rollupPluginUglify=require("rollup-plugin-uglify"),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},toConsumableArray=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(e){return!!e&&"object"===(void 0===e?"undefined":_typeof(e))}function isSpecial(e){var n=Object.prototype.toString.call(e);return"[object RegExp]"===n||"[object Date]"===n||isReactElement(e)}var canUseSymbol="function"==typeof Symbol&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(e){return e.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(e){return Array.isArray(e)?[]:{}}function cloneUnlessOtherwiseSpecified(e,n){return!1!==n.clone&&n.isMergeableObject(e)?deepmerge(emptyTarget(e),e,n):e}function defaultArrayMerge(e,n,t){return e.concat(n).map(function(e){return cloneUnlessOtherwiseSpecified(e,t)})}function mergeObject(n,t,r){var i={};return r.isMergeableObject(n)&&Object.keys(n).forEach(function(e){i[e]=cloneUnlessOtherwiseSpecified(n[e],r)}),Object.keys(t).forEach(function(e){r.isMergeableObject(t[e])&&n[e]?i[e]=deepmerge(n[e],t[e],r):i[e]=cloneUnlessOtherwiseSpecified(t[e],r)}),i}function deepmerge(e,n,t){(t=t||{}).arrayMerge=t.arrayMerge||defaultArrayMerge,t.isMergeableObject=t.isMergeableObject||isMergeableObject;var r=Array.isArray(n);return r===Array.isArray(e)?r?t.arrayMerge(e,n,t):mergeObject(e,n,t):cloneUnlessOtherwiseSpecified(n,t)}deepmerge.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return deepmerge(e,n,t)},{})};var deepmerge_1=deepmerge,packageJSON=void 0;try{packageJSON=require("./package.json")}catch(e){packageJSON={name:"",dependencies:[],devDependencies:[],peerDependencies:[]}}var _packageJSON=packageJSON,name=_packageJSON.name,getExternals=function(e){var n=e.dependencies,t=void 0===n?{}:n,r=e.devDependencies,i=void 0===r?{}:r,o=e.peerDependencies,u=void 0===o?{}:o;return[].concat(toConsumableArray(Object.keys(t)),toConsumableArray(Object.keys(i)),toConsumableArray(Object.keys(u)))},config={input:"src/index.js",plugins:[nodeResolve({preferBuiltins:!0}),commonjs(),babel({babelrc:!1,presets:[["env",{modules:!1}],"stage-3"],exclude:"node_modules/**",plugins:["external-helpers"]}),rollupPluginUglify.uglify()],output:{file:"dist/index.js",exports:"named",name:name,format:"cjs",sourceMap:!0},external:getExternals(packageJSON)},getExternals$1=function(e){var n=e.dependencies,t=void 0===n?{}:n,r=e.devDependencies,i=void 0===r?{}:r,o=e.peerDependencies,u=void 0===o?{}:o;return[].concat(toConsumableArray(Object.keys(t)),toConsumableArray(Object.keys(i)),toConsumableArray(Object.keys(u)))},isDefined=function(e){return void 0!==e},isDuplicate=function(n,e,t){return e===t.findIndex(function(e){return e.name===n.name})},replacePlugins=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=_extends({},e,{plugins:e.plugins.filter(isDefined).filter(isDuplicate)});return n.forEach(function(n){var e=t.plugins.findIndex(function(e){return e.name===n.name});-1<e?t.plugins.splice(e,1,n):t.plugins.push(n)}),t},trimPlugins=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=_extends({},e,{plugins:e.plugins.filter(isDefined).filter(isDuplicate)});return n.forEach(function(n){var e=t.plugins.findIndex(function(e){return e.name===n.name});-1<e&&t.plugins.splice(e,1)}),t},trimConfig=function(e){var n=e;return n.output&&(n.output.name&&delete n.output.name,n.output.globals&&delete n.output.globals),n.external&&delete n.external,n},trim=function(e){var n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).plugins,t=void 0===n?[]:n;return trimPlugins(trimConfig(e),t)},buildConfig=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return deepmerge_1(trim(e,n),n)},defaultConfig=config,buildDefaultConfig=function(e){return buildConfig(defaultConfig,e)},mergeDefaultConfig=buildDefaultConfig,defaultNpmConfig=buildDefaultConfig(),buildDefaultNpmConfig=function(e){return buildConfig(defaultNpmConfig,e)},mergeDefaultNpmConfig=buildDefaultNpmConfig,defaultNodeConfig=buildDefaultNpmConfig({output:{format:"cjs"},plugins:[nodeResolve({preferBuiltins:!0}),commonjs()]}),buildDefaultNodeConfig=function(e){return buildConfig(defaultNodeConfig,e)},mergeDefaultNodeConfig=buildDefaultNodeConfig,defaultExecutableConfig=buildDefaultNodeConfig({output:{format:"cjs",banner:"#!/usr/bin/env node"},plugins:[executable()]}),buildDefaultExecutableConfig=function(e){return buildConfig(defaultExecutableConfig,e)},mergeDefaultExecutableConfig=buildDefaultExecutableConfig;exports.getExternals=getExternals$1,exports.replacePlugins=replacePlugins,exports.trimPlugins=trimPlugins,exports.trimConfig=trimConfig,exports.trim=trim,exports.buildConfig=buildConfig,exports.config=config,exports.defaultConfig=defaultConfig,exports.buildDefaultConfig=buildDefaultConfig,exports.mergeDefaultConfig=mergeDefaultConfig,exports.defaultNpmConfig=defaultNpmConfig,exports.buildDefaultNpmConfig=buildDefaultNpmConfig,exports.mergeDefaultNpmConfig=mergeDefaultNpmConfig,exports.defaultNodeConfig=defaultNodeConfig,exports.buildDefaultNodeConfig=buildDefaultNodeConfig,exports.mergeDefaultNodeConfig=mergeDefaultNodeConfig,exports.defaultExecutableConfig=defaultExecutableConfig,exports.buildDefaultExecutableConfig=buildDefaultExecutableConfig,exports.mergeDefaultExecutableConfig=mergeDefaultExecutableConfig,exports.default=config;
