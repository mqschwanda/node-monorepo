!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("process"),require("exif-component"),require("rotate-component"),require("data-uri-to-u8"),require("image-size")):"function"==typeof define&&define.amd?define(["exports","process","exif-component","rotate-component","data-uri-to-u8","image-size"],t):t(e["@mqschwanda/rollup-config-default"]={},e.process,e.exif,e.rotate,e.dataUriToU8,e.imageSize)}(this,function(e,s,g,m,p,w){"use strict";function y(e,t){var a=t.width,n=t.height,r=e.getContext("2d"),i=r.getImageData(0,0,a,n);e.width=a,e.height=n,r.putImageData(i,0,0)}s=s&&s.hasOwnProperty("default")?s.default:s,g=g&&g.hasOwnProperty("default")?g.default:g,m=m&&m.hasOwnProperty("default")?m.default:m,p=p&&p.hasOwnProperty("default")?p.default:p,w=w&&w.hasOwnProperty("default")?w.default:w;var v=function(e,t){var a=new Image;return t&&(a.onload=t.bind(null,a)),a.src=e,a};var a=function(n){return new Promise(function(t,e){var a=new FileReader;a.onload=function(e){!function(e,a,n){"function"==typeof a&&(n=a,a={});var r=p(e),t={};try{t=g(r.buffer)}catch(e){}if(!t.Orientation||"number"!=typeof t.Orientation.value||3!==t.Orientation.value&&6!==t.Orientation.value&&8!==t.Orientation.value)return s.nextTick(function(){return n(e,a.image&&v(e))});var i=w(r),o=i.width,u=i.height,f=Math.max(o,u),d=f/2,c={3:2,6:1,8:-1}[t.Orientation.value],l=document.createElement("canvas"),h=l.getContext("2d");l.width=l.height=f,m(h,{x:d,y:d,degrees:90*c}),v(e,function(e){1===c||2===c?h.drawImage(e,0,f-u):h.drawImage(e,f-o,0),m(h,{x:d,y:d,degrees:-1*c*90}),y(l,2===c||-2===c?{width:o,height:u}:{width:u,height:o});var t="image/png"===r.type?l.toDataURL():l.toDataURL("image/jpeg",1);n(t,a.image&&v(t))})}(e.target.result,{image:!0},t)},a.onerror=e,a.readAsDataURL(n)})},n=function(u,f){return new Promise(function(e,t){try{for(var a=u.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),i=r.length,o=new Uint8Array(i);i--;)o[i]=r.charCodeAt(i);e(new File([o],f,{type:n}))}catch(e){t(e)}})};e.readFileAsDataURL=a,e.readDataURLAsFile=n,e.fixExifOrientation=function(t){return a(t).then(function(e){return n(e,t.name)})},Object.defineProperty(e,"__esModule",{value:!0})});
